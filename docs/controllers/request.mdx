---
sidebar_position: 2
---

import RightSidebarItem from '@site/src/components/ui/right-sidebar-item'

# request

## request and response objects

Any controller extending the PsychicController class will automatically contain references to the request and response objects, since they are coupled to the controller upon instantiation of the class.

```ts
import { PsychicController, Params } from 'psychic'

export default class HowyadoinsController extends PsychicController {
  public async create() {
    console.log(this.req)
    // returns an express request object

    console.log(this.req)
    // returns an express response object
  }
}
```

the req and res properties on your controller point directly to express request and response objects. Considering, if you are quite familiar with express, you will easily be able to leverage the `req` and `res` properties to do things you would normally do in express, like:

```ts
import { PsychicController, Params } from 'psychic'

export default class HowyadoinsController extends PsychicController {
  public async create() {
    this.res.json({ how: 'yadoin' })
  }
}
```

## params

If you want to, you can always access all the params of your request by using `this.params` (like so:)

```ts
export default class HowyadoinsController extends PsychicController {
  public async create() {
    console.log(this.params)
  }
}
```

The only problem with this approach, is it casts the return value as `any`. If you would like to do any type casting and validation, you can use the `castParam` method, like so:

```ts
export default class HowyadoinsController extends PsychicController {
  public async create() {
    const id = this.castParam('id', 'bigint')
    const rating = this.castParam('rating', 'number')
    const role = this.castParam('rating', 'string', {
      enum: ['Admin', 'Basic'],
    })
  }
}
```

You can also leverage `paramsFor`, which allows us to extract params based on what is injectable into a given model (excluding primary keys, autogenerated fields and belongs to foreign keys).

```ts
export default class HowyadoinsController extends PsychicController {
  public async create() {
    const userParams = this.paramsFor(User) // these will be typed and validated
    await this.currentUser.update(userParams)
  }
}
```
