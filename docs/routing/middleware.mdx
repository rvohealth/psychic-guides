---
sidebar_position: 1
ai_summary: "Psychic middleware piggy-backs off Express, enabling middleware composition in routing layer. Can bypass controller layer with middleware callbacks. Supports single middleware or array of ordered middleware callbacks."
---

## Middleware

Psychic has a concept of middleware which piggy-backs off of Express, enabling you compose in the routing layer as though you were in an Express app:

```ts
// conf/routes.ts
...
  r.post('/sign-in', (req, res) => {
    res.json({ hello: 'world' })
  })
```

This approach bypasses our controller layer, which we don't recommend since it provides such helpful utilities, but can be useful sometimes, say, when integrating with Express middleware.

## Multiple middleware callbacks

In addition to a single middleware callback, Psychic enables you to provide several, ordered middleware callbacks. To do this, simply put the callbacks into an array, like so:

```ts
  r.post('/sign-in', [
    (req, res, next) => {
      console.log('A')
      next()
    },
    (req, res, next) => {
      console.log('B')
      next()
    },
    (req, res, next) => {
      console.log('C')
      res.json({ nowIKnowMy: ['a', 'b', 'c']})
    },
  )
```