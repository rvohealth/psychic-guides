---
sidebar_position: 7
pagination_next: null
ai_summary: The conf/repl.ts file bootstraps the REPL (console). By default loads all models and services to global context (namespaced by file path). Supports adding custom globals to replServer.context and dynamic imports.
---

# repl

The `conf/repl.ts` file is used for bootstrapping the REPL (which happens when you run the `pnpm console` script):

```ts
// conf/repl.ts

import './loadEnv'
import * as repl from 'node:repl'
import { loadRepl } from '@rvoh/psychic'

const replServer = repl.start('> ')

export default (async function () {
  await loadRepl(replServer.context)
})()
```

By default, this config will automatically load all models and services to the global context (though beware, the names of the classes will shift in this context to be based around file path, rather than the name of the class itself).

## Adding custom globals

If you need to bind anything else to the global context, you can simply attach it to `replServer.context`, like so:

```ts
import MyCustomClass from '../helpers/MyCustomClass'

export default (async function () {
  await loadRepl(replServer.context)
  replServer.context.MyCustomClass = MyCustomClass
})()
```

This will enable access once in the repl, like so:

```sh
NODE_ENV=development pnpm console
> console.log(MyCustomClass)
```

## Dynamically importing files

When in the REPL, you may find you need to import something into the REPL context that doesn't exist. For example, a helper function within your app somewhere. In this case, you can use the `dynamic import` syntax to bring those files in dynamically, like so:

```ts
myHelper = (await import('./test-app/app/helpers/myHelper.js')).default
```
