---
sidebar_position: 2
---

# dream

Since dream is an independent library that is imported by psychic, we expose configuration for you which enables dream to understand, for example, what your database credentials are, or where you want your database migrations to go. To do this, the dream library uses a few files. One of them, auto-generated by psychic when you create a new app, lives at the root of your application, and is called .dream.yml

```yaml
// .dream.yml
models_path: 'src/app/models'
serializers_path: 'src/app/serializers'
client_api_schema_path: '../client/src/app/api/schema.ts'
conf_path: 'src/conf'
migrations_path: 'src/db/migrations'
associations_path: 'src/db/associations.ts'
schema_path: 'src/db/schema.ts'
db_seed_path: 'src/db/seed.ts'
unit_spec_path: 'spec/unit'
feature_spec_path: 'spec/features'
dreamconf_path: 'src/conf/dreamconf'
```

Secondarily, a base model (called `ApplicationModel`) is pre-established for you which contains carefully constructed type bindings to bridge the types generated by kysely throughout our app through each of your models. This happens automatically for you, but it must be the base class for each of your models in order for the type safety of our system to work properly.

```ts
import { AssociationDepths, Dream, Dreamconf } from '@rvohealth/dream'
import {
  AllColumns,
  DBClass,
  DBColumns,
  DBTypeCache,
  InterpretedDBClass,
} from '../../db/schema'
import SyncedAssociationsVal, {
  SyncedAssociations,
  SyncedBelongsToAssociations,
  VirtualColumns,
} from '../../db/associations'
import dreamconf from '../../conf/dreamconf'

export default class ApplicationModel extends Dream {
  public get DB() {
    return new DBClass()
  }

  public get maxAssociationTypeDepth() {
    return AssociationDepths.FIVE as const
  }

  public get syncedAssociations(): SyncedAssociations {
    return SyncedAssociationsVal as SyncedAssociations
  }

  public get allColumns(): typeof AllColumns {
    return AllColumns as typeof AllColumns
  }

  public get dreamconf(): Dreamconf<
    DBClass,
    InterpretedDBClass,
    SyncedAssociations,
    SyncedBelongsToAssociations,
    VirtualColumns,
    typeof DBColumns,
    typeof DBTypeCache
  > {
    return dreamconf
  }
}
```
